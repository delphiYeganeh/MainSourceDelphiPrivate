BEGIN TRANSACTION
GO
IF EXISTS ( SELECT 1
            FROM   sysobjects 
            WHERE  id = object_id(N'[dbo].[GET_ACCOUNTNO_BYACCOUNTID]')
                   and OBJECTPROPERTY(id, N'IsProcedure') = 1 )
BEGIN
    DROP PROCEDURE [dbo].[GET_ACCOUNTNO_BYACCOUNTID]
END
GO

CREATE  procedure [dbo].[GET_ACCOUNTNO_BYACCOUNTID]  
	@ACCOUNTID INT,
	@ACCOUNTNO VARCHAR(20) OUTPUT  
AS  
DECLARE @ISACTIVE BIT 
 
SELECT @ACCOUNTNO=ACCOUNTNO,@ISACTIVE=ISACTIVE  
	FROM ACCOUNT  
	WHERE ACCOUNTID=@ACCOUNTID  
  
SET @ACCOUNTNO=ISNULL(@ACCOUNTNO,'-1')  
SET @ISACTIVE=ISNULL(@ISACTIVE,1)  
IF @ISACTIVE=0 
	SET @ACCOUNTNO=-1
GO

COMMIT
GO