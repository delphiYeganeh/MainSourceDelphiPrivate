BEGIN TRANSACTION
GO
IF EXISTS ( SELECT 1
            FROM   sysobjects 
            WHERE  id = object_id(N'[dbo].[GET_SUMPARTAMOUNT]')
                   and OBJECTPROPERTY(id, N'IsProcedure') = 1 )
BEGIN
    DROP PROCEDURE [dbo].[GET_SUMPARTAMOUNT]
END
GO

CREATE  procedure [dbo].[GET_SUMPARTAMOUNT]
	@LOANID INT, 
	@SUMAMOUNT BIGINT OUTPUT
AS
	SELECT     @SUMAMOUNT=SUM(AMOUNT)
		FROM         FORCEPAYMENT
		WHERE      (PARENTID = @LOANID) AND (FORCETYPEID = 1)
	
	SET @SUMAMOUNT=ISNULL(@SUMAMOUNT,0)
GO

COMMIT
GO