BEGIN TRANSACTION
GO
IF EXISTS ( SELECT 1
            FROM   sysobjects 
            WHERE  id = object_id(N'[dbo].[CALCULATE_WAGE_INTEREST_2]')
                   and OBJECTPROPERTY(id, N'IsProcedure') = 1 )
BEGIN
    DROP PROCEDURE [dbo].[CALCULATE_WAGE_INTEREST_2]
END
GO

CREATE  procedure [dbo].[CALCULATE_WAGE_INTEREST_2]
@LOANAMOUNT BIGINT, @partNumber INT,@LOANTYPEID SMALLINT,@WAGEAMOUNT BIGINT OUTPUT,@INTERESTAMOUNT BIGINT OUTPUT
AS
SELECT  @WAGEAMOUNT=FIXWAGE+(CAST(WAGEPERCENT AS MONEY)*@LOANAMOUNT)/100,@INTERESTAMOUNT=(INTERESTPERCENT*(@partNumber+1)*@LOANAMOUNT)/2400
FROM    LOANTYPE
WHERE   LOANTYPEID = @LOANTYPEID

SET @WAGEAMOUNT=ISNULL(@WAGEAMOUNT,0)
SET @INTERESTAMOUNT=ISNULL(@INTERESTAMOUNT,0)
GO

COMMIT
GO